{% extends "base.html" %}
{% block title %}Home - GrantPal{% endblock %}
{% block content %}
<style>
/* ===== Base Styling ===== */
body {
    display: flex;
    min-height: 100vh;
    font-family: 'Roboto', sans-serif;
    background-color: #ffffff;
}

h1, h2, h3, h4, h5, h6 {
    font-family: 'Averia Serif Libre', cursive;
}


/* ===== Sidebar Styling ===== */
.home-page .sidebar {
    position:fixed;
    width: 299px;
    height: 865px;
    top: 0;
    left: 0;
    border: 1px solid;
    border-color: #e4e4e4;
    box-shadow: 0.3px 1px 5px #0000000f;
    background: linear-gradient(
    180deg,
    rgba(190, 217, 223, 0.33) 14%,
    rgba(219, 229, 255, 0.43) 50%,
    rgba(241, 232, 251, 0.19) 100%
  );
}

.home-page .sidebar h2 {
    font-size: 1.4rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    color: #333;
    text-align: center;
    padding-top: 0;
}

.home-page .text-center.mb-4 {
    margin-bottom: 1rem;
}

/* .sidebar img {
    display: block;
    height: 80px;
} */

.home-page .nav-link {
    font-size: 0.95rem;
    font-weight: 500;
    color: #222;
    padding: 14px 12px 14px 30px;
    border-radius: 10px;
    margin-left: 14px;
    margin-right: 14px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    transition: background 0.5s, color 0.5s;
    text-decoration: none;
}

.home-page .nav-link i {
    font-size: 1.2rem;
    margin-right: 8px;
}

.home-page .nav-link:hover {
    background-color: #e4ebff;
    color: #4b4fef;
}

.home-page .nav-link.active {
    background-color: white;
    border: 1px solid #d5dbff;
    color: #4b4fef;
    box-shadow: 0 0 6px rgba(0, 0, 0, 0.03);
    padding: 14px 12px 14px 30px;
    max-width: 250px;
    padding-left: 20px;
}

/* ===== Main Content ===== */
.home-page .main-content {
    margin-left: 299px;
    padding: 20px;
}

/* ===== Card Styling ===== */
.home-page .card {
    border: none;
    border-radius: 16px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    transition: transform 0.2s ease;
}
.home-page .card:hover {
    transform: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* ===== Inputs & Buttons ===== */
.home-page .form-select,
.home-page .form-control {
    border-radius: 12px;
    font-size: 0.85rem;
    padding: 0.4rem 0.6rem;
    border: 1px solid #dee2e6;
}

.home-page .btn-outline-primary,
.home-page .btn-outline-secondary {
    border-radius: 12px;
    font-size: 0.85rem;
}
.home-page .btn-outline-primary {
    color: #5865F2;
    border-color: #5865F2;
}
.home-page .btn-outline-primary:hover {
    background-color: #5865F2;
    color: white;
}

/* ===== Badge and Task List ===== */
.home-page .badge.bg-success {
    background-color: #2ecc71 !important;
    font-size: 0.85rem;
    padding: 0.35em 0.65em;
    border-radius: 8px;
}

.home-page .list-group-item {
    border: none;
    border-radius: 10px;
    background-color: #f8f9fa;
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
}

/* ===== Calendar Embed Styling ===== */
iframe {
    border-radius: 12px;
    border: none !important;
}

/* ===== Typography Tweaks ===== */
h3, h5, h6 {
    font-family: 'Inter', sans-serif;
    font-weight: 600;
}

.home-page .table th {
    width: 250px;
    background-color: #f8f9fa;
    font-weight: 600;
    vertical-align: top;
}

.home-page .table td ul {
    padding-left: 1.25rem;
    margin: 0;
    list-style-type: disc;
}

.home-page .table td ul li {
    margin-bottom: 0.25rem;
    line-height: 1.4;
}
/* ===== Pal Icons ===== */
.home-page .CheckerPalIcon{
    display: block; /*remove inline space*/
    width: 60px;
    height: auto;
    align-self: flex-start;
    margin: 0 0 4px 0px; /* â† 20px from the left */
    transform: rotate(-8deg);
}
.home-page .DeadlinePalIcon{
    display: block; /*remove inline space*/
    width: 60px;
    height: auto;
    align-self: flex-start;
    transform: rotate(30deg);
}
.home-page .AnswerPalIcon{
    display: block; /*remove inline space*/
    width: 60px;
    height: auto;
}
.home-page .grantpal-icons{
    display: flex;
    flex-direction: row;
    gap: 10px;
    padding-top: 50px;
}
.home-page .grantpal-heading {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    padding-left: 40px;
}
.home-page .sidebar h2.grantpal-title{
    font-weight: 500;
    font-size: 1.5rem;
    margin-top: 4px;
    margin-bottom: 0;
    line-height: 1.2;
}
.home-page .grantpal-title-row {
    display: flex;
    flex-direction: row;
    gap: 10px;
    align-items: center;
    padding-left: 10px;
    margin-top:8px;
}

/* ========Landing Page========*/
.home-page .project-wrapper {
    border: 2px solid #e6e6e6;
    background-color: #ffffff;
    border-radius: 15px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05); /* optional soft shadow */
}
.home-page .project-header {
    margin-bottom: 4px;
}
.home-page .card-body-bordered {
    border: 1px solid #e6e6e6;
    border-radius: 15px;
    padding: 1rem;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
}

.home-page .custom-separator {
  border-top: 2px solid #999;
  margin-top: 8px !important;      /* keep close to header */
  margin-bottom: 20px !important;  /* bigger gap below */
}

.home-page .horizontal-scroll-wrapper {
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    -webkit-overflow-scrolling: touch;
}
.home-page .row.flex-nowrap {
    flex-wrap: nowrap;
}
.home-page .custom-card-width {
    width: 400px; /* Adjust the width as needed */
    flex: 0 0 auto; /* Prevents the card from shrinking */
}
.home-page .card, .card-body-bordered {
    word-wrap: break-word; /* allow long words to break */
    overflow-wrap: break-word; /* same as word-wrap, modern */
    white-space: normal; /* allow text to wrap to next line */
}
/* ===== Dropdown Styling ===== */
.home-page .small-dropdown {
    width: 130px; /* Adjust the width as needed */
}
.home-page .status-dropdown {
    padding: 4px 10px;
    border-radius: 8px;
    font-size: 0.85rem;
    transition: background-color 0.3s, color 0.3s;
}

/* Background color for each status */
.home-page .bg-warning {
  background-color: #F2F9E6 !important;  /* light green */
  color: #85A453 !important; /* dark green */
}

.home-page .bg-info {
  background-color: #FFEEBD !important;  
  color: #91741F !important; /* dark yellow */
}

.home-page .bg-danger {
  background-color: #FFEDF3 !important;  /* pinkish/red */
  color: #C6195B !important;
}
select.status-dropdown {
  font-weight: bold;
}
.home-page .status-dropdown option[value="Not Started"] {
  background-color: #F2F9E6;  /* light green */
  color: #85A453; /* dark green */
}

.home-page .status-dropdown option[value="Ongoing"] {
  background-color: #FFEEBD;
  color: #91741F;
}

.home-page .status-dropdown option[value="Urgent"] {
  background-color: #FFEDF3;
  color: #C6195B;
}
body, html {
  overflow-x: hidden; /* Prevent page-wide horizontal scroll */
  max-width: 100vw; /* Optional: constrain max width */
}

.home-page .container-fluid {
  overflow-x: visible; /* Let internal scroll wrappers work */
}

/* Hide default calendar icon inside date input */
input[type="date"].no-calendar-icon::-webkit-calendar-picker-indicator {
  display: none;
  -webkit-appearance: none;
}

.home-page .custom-calendar-container {
    margin-top: 25px;
    width: 302px;
    height: 400px;
    border: 1px solid #e6e6e6;
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.home-page .todolist-container {
    border: 1px solid #e6e6e6; /* Adds a solid, light grey border */
    border-radius: 8px; /* Rounds the corners of the border */
    padding: 15px; /* Adds some space inside the border so content isn't right up against it */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Adds a subtle shadow */
    width: 300px;
}
.home-page .todolist-button {
    width: 300px;
    
    /* This will center the button below the to-do list. */
    display: block; 
    margin-left: auto;
    margin-right: auto;
}
.home-page .todolist-heading {
    font-weight: 500; 
    font-size: 20px;
}
/* Reduce padding to make the list items shorter */
.home-page .custom-list-item {
    padding-top: 8px;
    padding-bottom: 8px;
}
/* Existing CSS for the filled pink tick */
.home-page .custom-tick {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background-color: #FF00A1; /* Pink color */
    color: white; /* White color for the tick */
    font-size: 12px;
    line-height: 1;
    font-style: normal;
    cursor: pointer; /* Add cursor to indicate it's clickable */
    transition: background-color 0.3s, border-color 0.3s; /* Smooth transition on click */
}

.home-page .custom-tick::before {
    content: "\2713"; /* Unicode for the checkmark symbol âœ“ */
}

/* New CSS for the outlined state */
.home-page .custom-tick.outlined {
    background-color: transparent; /* No fill */
    border: 1px dashed #FF00A1; /* Pink outline */
    color: transparent; /* Hide the white tick */
}

/* Optional: Add a hover effect */
.home-page .custom-tick:hover {
    opacity: 0.8;
}
.home-page .task-title {
    font-size: 14px; 
}
/* Expandable to-do list */
.home-page .collapsed-list {
    max-height: 255px;
    overflow-y: hidden;
    transition: max-height 0.5s ease-in-out;
}

.home-page .collapsed-list.expanded {
    max-height: 1000px;
}
/* This gives the main container its border and rounded corners */
.home-page .todolist-container {
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 15px; /* Adds padding inside the box */
    background-color: #ffffff;;
}

/* This removes the border from each list item to prevent a double border effect */
.home-page .custom-list-item {
    padding-top: 14px;
    padding-bottom: 14px;
    flex-grow: 1;
    border-radius: 8px !important;
    border: 1px solid #e6e6e6 !important;
}

.home-page .todolist-divider {
    height: 1px;
    background-color: #e6e6e6;
    margin-left: -15px;
    margin-right: -15px;
}

/* This is the new CSS for the expandable project section */
.home-page .project-list-container {
    max-height: 600px; 
    overflow: hidden;
    transition: max-height 0.4s ease-in-out;
    position: relative; /* Needed for the fade effect pseudo-element */
    padding-bottom: 20px; /* Add some space at the bottom */
}

/* This class will be added by JavaScript to expand the section */
.home-page .project-list-container.expanded {
    max-height: 2000px; /* A large value to ensure all projects are visible */
}

.home-page .project-list-container.collapsed-projects::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 60px; /* Height of the fade effect */
    background: linear-gradient(to bottom, transparent, #ffffff 80%);
    pointer-events: none; /* Allows clicks to pass through the overlay */
}
.home-page .project-divider {
    border-top: 1px solid #e6e6e6; /* A light gray line */
    margin-left: -25px;
    margin-right: -25px;
}

/* ===== Home layout polish: centered container + fixed right rail ===== */
@media (min-width: 992px) {
  /* keep the whole page from stretching too wide */
  .home-page .container-fluid {
    max-width: 1280px;
    margin: 0 auto;
    padding-left: 24px;
    padding-right: 24px;
  }

  /* give a comfy gutter */
  .home-page .row { --bs-gutter-x: 24px; }

  /* MAIN (left/middle) column = fluid */
  .home-page .container-fluid > .row > .col-md-9 {
    flex: 1 1 auto !important;
    max-width: none !important;
    min-width: 0;                 /* prevents content from forcing overflow */
  }

  /* RIGHT rail = fixed width */
  .home-page .container-fluid > .row > .col-md-3 {
    flex: 0 0 340px !important;
    max-width: 340px !important;
  }
}

/* make widgets in the right rail never overflow */
.home-page .todolist-container,
.home-page .custom-calendar-container { width: 100%; }
.home-page .custom-calendar-container iframe {
  width: 100% !important;
  height: 400px;
  border: 0;
  border-radius: 12px;
}

/* horizontal card scroller should not push page width */
.home-page .horizontal-scroll-wrapper {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 6px;
}

</style>
<div class="home-page">
<div class="container-fluid">
<div class="row">
<div class="col-md-9">
<h3 class="mb-1">Grant Applications</h3>
<h5 class="text-muted mb-4" style="font-weight: 400; font-size: 20px;">For Projects</h5>
<div class="project-wrapper p-4 mb-4">
<div class="project-list-container collapsed-projects">
<div class="mb-5">
<div class="d-flex justify-content-between align-items-center mb-2" style="margin-top: 0; margin-bottom: 8px;">
<h5 class="project-header" style="font-weight: 550;">Being Guests</h5>
<img alt="Options" src="{{ url_for('static', filename='assets/tripledot.svg') }}" style="width: 20px; height: 20px; cursor: pointer;"/>
</div>
<hr class="custom-separator" style="margin-bottom: 30px;"/>
<div class="horizontal-scroll-wrapper mb-4">
<div class="row flex-nowrap">
<div class="custom-card-width">
<div class="card mb-3">
<div class="card-body card-body-bordered">
<div class="mb-2">
<select class="form-select status-dropdown small-dropdown" style="max-width: 160px;">
<option selected="" value="Urgent">Urgent</option>
<option value="In Progress">In Progress</option>
<option value="Not Started">Not Started</option>
</select>
</div>
<div class="d-flex justify-content-between align-items-center mb-2">
<div class="d-flex align-items-center gap-2">
<input class="form-control no-calendar-icon date-input" style="width: 140px;" type="date" value="2025-08-02"/>
<i class="bi bi-calendar3 calendar-icon" style="font-size: 1.3rem; cursor: pointer;" title="Open calendar"></i>
</div>
<button class="btn btn-outline-secondary save-to-calendar-btn" data-description="Being Guests" data-title="Temasek Foundation">
                                                    Save deadline
                                                </button>
</div>
<h6 class="mt-3">Temasek Foundation</h6>
<p class="small">
Timeline: Projects should commence within 30 days
Eligible Applicants: Individuals or groups
Budget: Up to 80% sponsorship</p>
<div class="border rounded p-2 mb-2 bg-light shadow-sm">
<p class="mb-1 text-muted small">Last opened: 1 Jun</p>
<h6 class="mb-1">ðŸ“„ Project Proposal</h6>
<p class="small text-secondary mb-0">A 6-month plan to provide 500 care kits to seniors. Volunteers and clinics will be engaged to identify needs.</p>
</div>
</div>
</div>
</div>
<div class="custom-card-width">
<div class="card mb-3">
<div class="card-body card-body-bordered">
<div class="mb-2">
<select class="form-select status-dropdown small-dropdown" style="max-width: 160px;">
<option value="Urgent">Urgent</option>
<option selected="" value="In Progress">In Progress</option>
<option value="Not Started">Not Started</option>
</select>
</div>
<div class="d-flex justify-content-between align-items-center mb-2">
<div class="d-flex align-items-center gap-2">
<input class="form-control no-calendar-icon date-input" style="width: 140px;" type="date" value="2025-08-02"/>
<i class="bi bi-calendar3 calendar-icon" style="font-size: 1.3rem; cursor: pointer;" title="Open calendar"></i>
</div>
<button class="btn btn-outline-secondary save-to-calendar-btn" data-description="Being Guests" data-title="Tote Board">
                                                    Save deadline
                                                </button>
</div>
<h6 class="mt-3">Tote Board</h6>
<p class="small">
Timeline: Project must create positive community impact
Eligible Applicants: Social service agencies or ground-up groups
Budget: Up to $100,000</p>
<div class="border rounded p-2 mb-2 bg-light shadow-sm">
<p class="mb-1 text-muted small">Last opened: 12 Jul</p>
<h6 class="mb-1">ðŸ“„ Community Support Outreach</h6>
<p class="small text-secondary mb-0">This project supports vulnerable individuals through inclusive community initiatives and assistance.</p>
</div>
</div>
</div>
</div>
<div class="custom-card-width">
<div class="card mb-3">
<div class="card-body card-body-bordered">
<div class="mb-2">
<select class="form-select status-dropdown small-dropdown" style="max-width: 160px;">
<option value="Urgent">Urgent</option>
<option value="In Progress">In Progress</option>
<option selected="" value="Not Started">Not Started</option>
</select>
</div>
<div class="d-flex justify-content-between align-items-center mb-2">
<div class="d-flex align-items-center gap-2">
<input class="form-control no-calendar-icon date-input" style="width: 140px;" type="date" value="2025-08-02"/>
<i class="bi bi-calendar3 calendar-icon" style="font-size: 1.3rem; cursor: pointer;" title="Open calendar"></i>
</div>
<button class="btn btn-outline-secondary save-to-calendar-btn" data-description="Being Guests" data-title="Our Singapore Fund">
                                                    Save deadline
                                                </button>
</div>
<h6 class="mt-3">Our Singapore Fund</h6>
<p class="small">
Timeline: Projects must build social cohesion
Eligible Applicants: Singapore Citizens or PRs
Budget: Up to $20,000</p>
<div class="border rounded p-2 mb-2 bg-light shadow-sm">
<p class="mb-1 text-muted small">Last opened: 20 May</p>
<h6 class="mb-1">ðŸ“„ Neighborhood Kindness Campaign</h6>
<p class="small text-secondary mb-0">Promotes empathy and unity through neighborhood events and care drives.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="mb-5">
<div class="d-flex justify-content-between align-items-center mb-2" style="margin-top: 0; margin-bottom: 8px;">
<h5 class="project-header" style="font-weight: 550;">Care Companions</h5>
<img alt="Options" src="{{ url_for('static', filename='assets/tripledot.svg') }}" style="width: 20px; height: 20px; cursor: pointer;"/>
</div>
<hr class="custom-separator" style="margin-bottom: 30px;"/>
<div class="horizontal-scroll-wrapper mb-4">
<div class="row flex-nowrap">
<div class="custom-card-width">
<div class="card mb-3">
<div class="card-body card-body-bordered">
<div class="mb-2">
<select class="form-select status-dropdown small-dropdown" style="max-width: 160px;">
<option selected="" value="Urgent">Urgent</option>
<option value="In Progress">In Progress</option>
<option value="Not Started">Not Started</option>
</select>
</div>
<div class="d-flex justify-content-between align-items-center mb-2">
<div class="d-flex align-items-center gap-2">
<input class="form-control no-calendar-icon date-input" style="width: 140px;" type="date" value="2025-08-02"/>
<i class="bi bi-calendar3 calendar-icon" style="font-size: 1.3rem; cursor: pointer;" title="Open calendar"></i>
</div>
<button class="btn btn-outline-secondary save-to-calendar-btn" data-description="Care Companions" data-title="SG Enable">
                                                    Save deadline
                                                </button>
</div>
<h6 class="mt-3">SG Enable</h6>
<p class="small">
Timeline: Project must conclude within 6 months
Eligible Applicants: Non-profits
Budget: Max funding $50,000</p>
<div class="border rounded p-2 mb-2 bg-light shadow-sm">
<p class="mb-1 text-muted small">Last opened: 15 Jul</p>
<h6 class="mb-1">ðŸ“„ Companion Outreach</h6>
<p class="small text-secondary mb-0">Recruits volunteers to check in on isolated seniors, with wellness packs and mental health support.</p>
</div>
</div>
</div>
</div>
<div class="custom-card-width">
<div class="card mb-3">
<div class="card-body card-body-bordered">
<div class="mb-2">
<select class="form-select status-dropdown small-dropdown" style="max-width: 160px;">
<option value="Urgent">Urgent</option>
<option selected="" value="In Progress">In Progress</option>
<option value="Not Started">Not Started</option>
</select>
</div>
<div class="d-flex justify-content-between align-items-center mb-2">
<div class="d-flex align-items-center gap-2">
<input class="form-control no-calendar-icon date-input" style="width: 140px;" type="date" value="2025-08-02"/>
<i class="bi bi-calendar3 calendar-icon" style="font-size: 1.3rem; cursor: pointer;" title="Open calendar"></i>
</div>
<button class="btn btn-outline-secondary save-to-calendar-btn" data-description="Care Companions" data-title="Agency for Integrated Care (AIC)">
                                                    Save deadline
                                                </button>
</div>
<h6 class="mt-3">Agency for Integrated Care (AIC)</h6>
<p class="small">
Timeline: Must align with active ageing goals
Eligible Applicants: Healthcare partners or VWOs
Budget: Co-funding up to 70%</p>
<div class="border rounded p-2 mb-2 bg-light shadow-sm">
<p class="mb-1 text-muted small">Last opened: 5 Aug</p>
<h6 class="mb-1">ðŸ“„ Senior Wellness Circles</h6>
<p class="small text-secondary mb-0">Facilitates weekly gatherings and health checks for elderly living alone.</p>
</div>
</div>
</div>
</div>
<div class="custom-card-width">
<div class="card mb-3">
<div class="card-body card-body-bordered">
<div class="mb-2">
<select class="form-select status-dropdown small-dropdown" style="max-width: 160px;">
<option value="Urgent">Urgent</option>
<option value="In Progress">In Progress</option>
<option selected="" value="Not Started">Not Started</option>
</select>
</div>
<div class="d-flex justify-content-between align-items-center mb-2">
<div class="d-flex align-items-center gap-2">
<input class="form-control no-calendar-icon date-input" style="width: 140px;" type="date" value="2025-08-02"/>
<i class="bi bi-calendar3 calendar-icon" style="font-size: 1.3rem; cursor: pointer;" title="Open calendar"></i>
</div>
<button class="btn btn-outline-secondary save-to-calendar-btn" data-description="Care Companions" data-title="Silver Generation Office (SGO)">
                                                    Save deadline
                                                </button>
</div>
<h6 class="mt-3">Silver Generation Office (SGO)</h6>
<p class="small">
Timeline: Outreach within 3 months of award
Eligible Applicants: Community partners and NGOs
Budget: Flexible, based on scope</p>
<div class="border rounded p-2 mb-2 bg-light shadow-sm">
<p class="mb-1 text-muted small">Last opened: 10 Jul</p>
<h6 class="mb-1">ðŸ“„ Home Visit Support Network</h6>
<p class="small text-secondary mb-0">Deploys trained volunteers to provide social and medical support visits.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="mb-5">
<div class="d-flex justify-content-between align-items-center mb-2" style="margin-top: 0; margin-bottom: 8px;">
<h5 class="project-header" style="font-weight: 550;">EcoNova Urban Gardens</h5>
<img alt="Options" src="{{ url_for('static', filename='assets/tripledot.svg') }}" style="width: 20px; height: 20px; cursor: pointer;"/>
</div>
<hr class="custom-separator" style="margin-bottom: 30px;"/>
<div class="horizontal-scroll-wrapper mb-4">
<div class="row flex-nowrap">
<div class="custom-card-width">
<div class="card mb-3">
<div class="card-body card-body-bordered">
<div class="mb-2">
<select class="form-select status-dropdown small-dropdown" style="max-width: 160px;">
<option selected="" value="Urgent">Urgent</option>
<option value="In Progress">In Progress</option>
<option value="Not Started">Not Started</option>
</select>
</div>
<div class="d-flex justify-content-between align-items-center mb-2">
<div class="d-flex align-items-center gap-2">
<input class="form-control no-calendar-icon date-input" style="width: 140px;" type="date" value="2025-08-02"/>
<i class="bi bi-calendar3 calendar-icon" style="font-size: 1.3rem; cursor: pointer;" title="Open calendar"></i>
</div>
<button class="btn btn-outline-secondary save-to-calendar-btn" data-description="EcoNova Urban Gardens" data-title="Green Futures Fund">
                                                    Save deadline
                                                </button>
</div>
<h6 class="mt-3">Green Futures Fund</h6>
<p class="small">
Timeline: Launch within 90 days
Eligible Applicants: Environmental orgs
Budget: Grants up to $100,000</p>
<div class="border rounded p-2 mb-2 bg-light shadow-sm">
<p class="mb-1 text-muted small">Last opened: 10 Aug</p>
<h6 class="mb-1">ðŸ“„ Urban Gardens Grant Draft</h6>
<p class="small text-secondary mb-0">Supports rooftop hydroponic farming to improve food resilience in urban areas.</p>
</div>
</div>
</div>
</div>
<div class="custom-card-width">
<div class="card mb-3">
<div class="card-body card-body-bordered">
<div class="mb-2">
<select class="form-select status-dropdown small-dropdown" style="max-width: 160px;">
<option value="Urgent">Urgent</option>
<option selected="" value="In Progress">In Progress</option>
<option value="Not Started">Not Started</option>
</select>
</div>
<div class="d-flex justify-content-between align-items-center mb-2">
<div class="d-flex align-items-center gap-2">
<input class="form-control no-calendar-icon date-input" style="width: 140px;" type="date" value="2025-08-02"/>
<i class="bi bi-calendar3 calendar-icon" style="font-size: 1.3rem; cursor: pointer;" title="Open calendar"></i>
</div>
<button class="btn btn-outline-secondary save-to-calendar-btn" data-description="EcoNova Urban Gardens" data-title="NEA 3R Fund">
                                                    Save deadline
                                                </button>
</div>
<h6 class="mt-3">NEA 3R Fund</h6>
<p class="small">
Timeline: Must reduce waste or promote reuse
Eligible Applicants: Companies and non-profits
Budget: Up to 80% of qualifying costs</p>
<div class="border rounded p-2 mb-2 bg-light shadow-sm">
<p class="mb-1 text-muted small">Last opened: 25 Jun</p>
<h6 class="mb-1">ðŸ“„ Food Waste Composting Pilot</h6>
<p class="small text-secondary mb-0">EcoNova incorporates a closed-loop composting system using post-harvest waste.</p>
</div>
</div>
</div>
</div>
<div class="custom-card-width">
<div class="card mb-3">
<div class="card-body card-body-bordered">
<div class="mb-2">
<select class="form-select status-dropdown small-dropdown" style="max-width: 160px;">
<option value="Urgent">Urgent</option>
<option value="In Progress">In Progress</option>
<option selected="" value="Not Started">Not Started</option>
</select>
</div>
<div class="d-flex justify-content-between align-items-center mb-2">
<div class="d-flex align-items-center gap-2">
<input class="form-control no-calendar-icon date-input" style="width: 140px;" type="date" value="2025-08-02"/>
<i class="bi bi-calendar3 calendar-icon" style="font-size: 1.3rem; cursor: pointer;" title="Open calendar"></i>
</div>
<button class="btn btn-outline-secondary save-to-calendar-btn" data-description="EcoNova Urban Gardens" data-title="NParks Community in Bloom">
                                                    Save deadline
                                                </button>
</div>
<h6 class="mt-3">NParks Community in Bloom</h6>
<p class="small">
Timeline: Initiative must involve local residents
Eligible Applicants: Community groups
Budget: Up to $20,000</p>
<div class="border rounded p-2 mb-2 bg-light shadow-sm">
<p class="mb-1 text-muted small">Last opened: 30 Jul</p>
<h6 class="mb-1">ðŸ“„ Greening Together: Rooftop Edition</h6>
<p class="small text-secondary mb-0">Empowers residents to grow vegetables together on shared spaces with EcoNova kits.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="project-divider"></div>
<div class="text-center">
<button class="btn toggle-projects-btn" style="border: none; background: none; padding: 0;">
<i class="bi bi-chevron-down"></i>
</button>
</div>
</div>
<div class="text-center mt-4">
<button class="btn btn-outline-secondary w-100">+ New Grant</button>
</div>
</div>
<div class="col-md-3">
<div class="mb-4 todolist-container">
<h5 class="todolist-heading">To-do List</h5>
<ul class="list-group rounded-0 collapsed-list">
<div class="d-flex align-items-center mb-2 list-item-wrapper">
<li class="list-group-item custom-list-item">
<div>
<span class="task-title">Temasek Foundation Application</span>
<small class="text-muted d-block">By Aug 25</small>
</div>
</li>
<i class="custom-tick ms-2 outlined"></i>
</div>
<div class="d-flex align-items-center mb-2 list-item-wrapper">
<li class="list-group-item custom-list-item">
<div>
<span class="task-title">Regenerate MCCY answers</span>
<small class="text-muted d-block">By Sep 05</small>
</div>
</li>
<i class="custom-tick ms-2 outlined"></i>
</div>
<div class="d-flex align-items-center mb-2 list-item-wrapper">
<li class="list-group-item custom-list-item">
<div>
<span class="task-title">Finalize MCCY Application</span>
<small class="text-muted d-block">By Sep 08</small>
</div>
</li>
<i class="custom-tick ms-2 outlined"></i>
</div>
<div class="d-flex align-items-center mb-2 list-item-wrapper">
<li class="list-group-item custom-list-item">
<div>
<span class="task-title">Care Companion Grant Applications</span>
<small class="text-muted d-block">By Sep 21</small>
</div>
</li>
<i class="custom-tick ms-2"></i>
</div>
<div class="d-flex align-items-center mb-2 list-item-wrapper">
<li class="list-group-item custom-list-item">
<div>
<span class="task-title">BeingGuests Grant Applications</span>
<small class="text-muted d-block">By Oct 02</small>
</div>
</li>
<i class="custom-tick ms-2"></i>
</div>
</ul>
<div class="todolist-divider"></div>
<div class="text-center">
<button class="btn toggle-list-btn" style="border: none; background: none; padding: 0;">
<i class="bi bi-chevron-down"></i>
</button>
</div>
</div>
<button class="btn btn-outline-secondary mt-2 todolist-button">+ New Task</button>
<div class="mb-5 custom-calendar-container">
<iframe frameborder="0" height="400" scrolling="no" src="https://calendar.google.com/calendar/embed?src=beingthebridges%40gmail.com&amp;ctz=Asia%2FSingapore" style="border: 0" width="300px">
</iframe>
</div>
</div>
</div>
</div>
<div aria-hidden="true" aria-labelledby="successModalLabel" class="modal fade" id="successModal" tabindex="-1">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content">
<div class="modal-body text-center">
<div class="d-flex align-items-center justify-content-center mb-3">
<i class="bi bi-check-circle-fill me-2" style="color: #e83e8c; font-size: 1.5rem;"></i>
<h5 class="fw-normal mb-0">Date added to Google Calendar!</h5>
</div>
<button class="btn btn-outline-secondary" data-bs-dismiss="modal" type="button">Done</button>
</div>
</div>
</div>
</div>
<script>
// Status color handler
function updateStatusColor(dropdown) {
    // Remove all the bg and text-white classes first
    dropdown.classList.remove("bg-warning", "bg-info", "bg-danger", "text-white");

    // Add appropriate classes based on selected value
    if (dropdown.value === "Not Started") {
        dropdown.classList.add("bg-warning"); // yellowish background
        dropdown.classList.remove("text-white"); // dark text
    } else if (dropdown.value === "In Progress") {
        dropdown.classList.add("bg-info", "text-white"); // blue bg with white text
    } else if (dropdown.value === "Urgent") {
        dropdown.classList.add("bg-danger", "text-white"); // red bg with white text
    }
}

// Initialize colors on page load and listen for changes
document.querySelectorAll('.status-dropdown').forEach(dropdown => {
    updateStatusColor(dropdown); // Set initial color
    dropdown.addEventListener('change', () => updateStatusColor(dropdown));
});

// Save to Calendar Button
document.querySelectorAll('.save-to-calendar-btn, .save-calendar-btn').forEach(button => {
    button.addEventListener('click', async () => {
        const container = button.closest('.card-body');
        const dateInput = container.querySelector('input[type="date"]');
        const dueDate = dateInput.value;
        const title = button.dataset.title;
        const description = button.dataset.description;

        if (!dueDate) return alert("Please select a date before saving to calendar.");

        const response = await fetch('/add-to-calendar', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ title, description, date: dueDate })
        });

        const result = await response.json();
        if (result.success) {
            const successModal = new bootstrap.Modal(document.getElementById('successModal'));
            successModal.show();
        }
        else alert("âŒ Failed to add to calendar.");
    });
});
document.querySelectorAll('.calendar-icon').forEach(icon => {
  icon.addEventListener('click', () => {
    const input = icon.previousElementSibling;
    if (input && input.showPicker) {
      input.showPicker();
    } else {
      input.focus();
    }
  });
});

// Get all elements with the class 'custom-tick'
const ticks = document.querySelectorAll('.custom-tick');

// Loop through each tick and add a click event listener
ticks.forEach(tick => {
    tick.addEventListener('click', () => {
        // This toggles the 'outlined' class on and off
        tick.classList.toggle('outlined');
    });
});

// New script for project section expansion
const projectsContainer = document.querySelector('.project-list-container');
const projectsToggleBtn = document.querySelector('.toggle-projects-btn');
const projectsToggleIcon = projectsToggleBtn.querySelector('.bi');

projectsToggleBtn.addEventListener('click', () => {
    // Toggle the 'expanded' class to control the max-height
    projectsContainer.classList.toggle('expanded');
    
    // Toggle the icon
    if (projectsContainer.classList.contains('expanded')) {
        projectsToggleIcon.classList.replace('bi-chevron-down', 'bi-chevron-up');
    } else {
        projectsToggleIcon.classList.replace('bi-chevron-up', 'bi-chevron-down');
    }

    // Toggle the fade-out overlay
    projectsContainer.classList.toggle('collapsed-projects');
});

// To-do List toggle
const todoList = document.querySelector('.todolist-container .list-group');
const todoToggleBtn = document.querySelector('.toggle-list-btn');
const todoToggleIcon = todoToggleBtn.querySelector('.bi');

todoToggleBtn.addEventListener('click', () => {
    todoList.classList.toggle('expanded');
    if (todoList.classList.contains('expanded')) {
        todoToggleIcon.classList.replace('bi-chevron-down', 'bi-chevron-up');
    } else {
        todoToggleIcon.classList.replace('bi-chevron-up', 'bi-chevron-down');
    }
});
</script>
</div>
{% endblock %}